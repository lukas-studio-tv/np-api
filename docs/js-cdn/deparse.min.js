const dp={parseDocument:function(){dp.parseArray(dp.$("*"),!0),dp.parseSnipets()},parseSingle:function(e){dp.parseArray([e],!0)},parseByNodeName:function(e){dp.parseArray(document.getElementsByTagName(e),!0)},parseByQuerySelectorAll:function(e){dp.parseArray(dp.$(e),!0)},parseByQuerySelector:function(e){dp.parseArray([dp.$(e)[0]],!0)},parseSnipets:function(){try{var e=0,r=document.getElementsByTagName("snip");for(let a=0;a<r.length;a++)try{var t=r[a];if(dp.logAfterThis=!1,dp.parseArray([t],!1),null!==dp.parsedResultAtribs.atr)for(let r=0;r<dp.parsedResultAtribs.atr.length;r++){var s=dp.parsedResultAtribs.atr_raw[r].substr(0,3),n=dp.parsedResultAtribs.atr_raw[r].substr(3);if("src"==s){var o,p=dp.snipets[n],l=p.match(/\{\$(.*?)\}/gi);try{o=JSON.parse("{"+t.innerHTML+"}");for(let e=0;e<l.length;e++)p=p.replaceAll(l[e],o[l[e].substr(2).substr(0,l[e].length-3)])}catch(e){dp.errors[0].e[dp.errors[0].e.length]=e,dp.doLog&&console.warn("[DP] While parsing snipets we found a syntax error in its items (Num "+a+"1. Type dp.erLog(0,"+String(dp.errors[0].e.length-1)+") for details.)")}t.id="tmp"+a,dp.snipetOutersTemp[dp.snipetOutersTemp.length]={c:p,id:"tmp"+a},e++}r==dp.parsedResultAtribs.atr.length-1&&(dp.parsedResultAtribs=[])}else dp.doLog&&console.warn("[DP] Found a snpiet tag but no :src : attribute has been found.")}catch(e){dp.errors[1].e[dp.errors[1].e.length]=e,dp.doLog&&console.log("[DP] Error while parsing snipet. Type dp.erLog(1,"+String(dp.errors[1].e.length-1)+") for details. "+e)}dp.doLog&&console.log("[DP] "+r.length+" snipet tags found, aprox. "+e+" were rendered. No fatal errors found."),dp.deleteSnipetTags()}catch(e){dp.errors[1].e[dp.errors[1].e.length]=e,dp.doLog&&console.log("[DP] Error while parsing snipets. Type dp.erLog(1,"+String(dp.errors[1].e.length-1)+") for details. "+e)}},parseArray:function(e,r){var t=e;dp.errorCount=0,dp.sucessCount=0,dp.usableCount=0,dp.bytesWritten=0,dp.newBytesWritten=0;for(let e=0;e<t.length;e++){var s=t[e],n=s.nodeName;if(dp.isSingleton(n));else{dp.usableCount++;try{var o="<#:"+s.outerHTML.replace(">"+s.innerHTML+"</",">-#-</")+":#>",p={start:o.match(/\<#\:(.*?)-#-/gi)[0].replaceAll(/-#-|\<#\:/gi,""),end:o.match(/-#-(.*?)\:#\>/gi)[0].replaceAll(/-#-|\:#\>/gi,"")},l=s.innerHTML,a=(s.classList,1),d=p.start.match(/\:(.*?)\:/gi),i=[];if(null!==d)for(let e=0;e<d.length;e++){i[e]=d[e].replaceAll(":","");var u=i[e].substr(0,1),g=i[e].substr(1);dp.parsedResultAtribs={atr:d,atr_raw:i},r&&("s"==u&&(p.start=p.start.replace(d[e]+'=""','style="'+g.replaceAll(".",":").replaceAll("-",";").replaceAll("bkg","background").replaceAll("clr","color").replaceAll("br","border-radius")+'"')),"r"==u&&(a=Number(g)),p.start=p.start.replace(d[e]+'=""',""))}var c=p.start.match(/\"(.*?)\"/gi),h=[];if(null!==c)for(let e=0;e<c.length;e++)h[e]=c[e].replaceAll('"',"");if(r){var f=p.start+"<...>"+p.end,A=f.replace("<...>",l);dp.bytesWritten=dp.bytesWritten+f.length,dp.newBytesWritten=dp.newBytesWritten+(A.length-s.outerHTML.length),s.outerHTML=A.repeat(a)}dp.sucessCount++}catch(e){dp.doLog&&console.log("DP Error: "+e),dp.errorCount++}}}r?dp.doLog&&console.log("[DP] Parse done\n"+dp.$("*").length+" found ("+t.length+" selected, "+dp.usableCount+" usable)\n"+dp.sucessCount+" sucessfull | "+String(dp.errorCount)+" failed\nIn total, aprox. "+dp.bytesWritten+" bytes was written ("+dp.newBytesWritten+" changed)"):dp.doLog&&dp.logAfterThis&&console.log("[DP] Parsing done with no-apply mode. Results returned.")},snipetAdd:function(e,r){dp.snipets[e]=r},$:function(e){return document.querySelectorAll(e)},errorCount:0,sucessCount:0,usableCount:0,bytesWritten:0,newBytesWritten:0,parsedResult:[],parsedResultAtribs:[],snipetOutersTemp:[],doLog:!0,logAfterThis:!0,erLog:function(e,r){try{console.warn("[DP] Printing out the error from  error log:"),console.error(dp.errors[e].e[r])}catch(e){console.warn("[DP] You tried to display an error that does not exist.")}},errors:[{type:"snipet-parse",e:[]},{type:"snipets",e:[]}],snipets:{},deleteSnipetTags:function(){for(let e=0;e<dp.snipetOutersTemp.length;e++)dp.$("#"+dp.snipetOutersTemp[e].id)[0].outerHTML=dp.snipetOutersTemp[e].c;dp.logAfterThis=!0},isSingleton:function(e){return"BR"==e||"HR"==e||"IMG"==e||"INPUT"==e||"META"==e||"COMMAND"==e||"AREA"==e||"BASE"==e||"COL"==e||"KEYGEN"==e||"LINK"==e||"PARAM"==e||"SOURCE"==e||"TRACK"==e||"WBR"==e||"BODY"==e||"HEAD"==e||"HTML"==e||"FOOTER"==e}};
